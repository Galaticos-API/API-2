<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox prefHeight="600.0" prefWidth="800.0" style="-fx-background-color: white;" xmlns="http://javafx.com/javafx/17.0.12"
      xmlns:fx="http://javafx.com/fxml/1" fx:controller="gui.modal.EditarPDIModalController">
    <stylesheets>
        <URL value="@/css/StyleEditarPDI.css"/>
    </stylesheets>
    <padding>
        <Insets bottom="25.0" left="25.0" right="25.0" top="25.0"/>
    </padding>

    <Label styleClass="page-title" text="Editar Plano de Desenvolvimento Individual"/>

    <VBox alignment="CENTER_LEFT" spacing="5.0" styleClass="progress-box">
        <Label styleClass="widget-subtitle" text="Progresso Geral do PDI:"/>
        <ProgressBar fx:id="progressBarGeral" maxWidth="Infinity" progress="0.0"/>
        <Text fx:id="textPontuacaoGeral" style="-fx-font-size: 14;" text="0.0% Concluído"/>
    </VBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <Tab text="Dados Gerais">
            <GridPane alignment="CENTER_LEFT" hgap="30.0" vgap="30.0">
                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
                </padding>

                <columnConstraints>
                    <ColumnConstraints hgrow="NEVER" minWidth="10.0" prefWidth="100.0"/>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="180.0"/>
                    <ColumnConstraints hgrow="NEVER" minWidth="10.0" prefWidth="60.0"/>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="180.0"/>
                </columnConstraints>

                <rowConstraints>
                    <RowConstraints minHeight="10.0" prefHeight="40.0" vgrow="SOMETIMES"/>
                    <RowConstraints minHeight="10.0" prefHeight="40.0" vgrow="SOMETIMES"/>
                    <RowConstraints minHeight="10.0" prefHeight="40.0" vgrow="SOMETIMES"/>
                    <RowConstraints minHeight="10.0" prefHeight="40.0" vgrow="SOMETIMES"/>
                </rowConstraints>

                <Label styleClass="form-label" text="Colaborador:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                <TextField fx:id="usuarioNomeField" editable="false" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                <Label styleClass="form-label" text="Cargo:" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                <TextField fx:id="usuarioCargoField" editable="false" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                <Label styleClass="form-label" text="Data Início:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                <DatePicker fx:id="dataCriacaoPicker" prefWidth="Infinity" GridPane.columnIndex="1"
                            GridPane.rowIndex="1"/>

                <Label styleClass="form-label" text="Status:" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                <ComboBox fx:id="statusPdiComboBox" prefWidth="Infinity" promptText="Selecione" GridPane.columnIndex="3"
                          GridPane.rowIndex="1"/>

                <Label styleClass="form-label" text="Data Fim:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                <DatePicker fx:id="dataFechamentoPicker" prefWidth="Infinity" GridPane.columnIndex="1"
                            GridPane.rowIndex="2"/>

                <Button onAction="#handleSavePdiDetails" styleClass="save-button" text="Salvar Dados Gerais"
                        GridPane.columnIndex="3" GridPane.halignment="RIGHT" GridPane.rowIndex="3"/>
            </GridPane>
        </Tab>

        <Tab text="Objetivos">
            <content>
                <VBox spacing="15.0">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
                    </padding>
                    <children>
                        <Label styleClass="widget-title" text="Metas Detalhadas"/>
                        <TableView fx:id="objetivoTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="descricaoColumn" prefWidth="250.0" text="Descrição"/>
                                <TableColumn fx:id="prazoColumn" prefWidth="100.0" text="Prazo"/>
                                <TableColumn fx:id="pesoColumn" prefWidth="60.0" text="Peso"/>
                                <TableColumn fx:id="pontuacaoColumn" prefWidth="80.0" text="Pontuação"/>
                                <TableColumn fx:id="statusColumn" prefWidth="100.0" text="Status"/>
                                <TableColumn fx:id="acoesColumn" prefWidth="100.0" text="Ações"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                            <children>
                                <Button onAction="#handleCalculateGeneralScore" styleClass="secondary-button"
                                        text="Recalcular Pontuação"/>
                                <Button onAction="#handleAddObjective" styleClass="primary-button"
                                        text="Adicionar Objetivo"/>
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </content>
        </Tab>

        <Tab text="Documentos">
            <content>
                <VBox spacing="15.0">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
                    </padding>
                    <children>
                        <Label styleClass="widget-title" text="Documentos Anexados"/>
                        <TableView fx:id="documentoTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="docNomeArquivoCol" prefWidth="300.0"
                                             text="Nome do Arquivo"/>
                                <TableColumn fx:id="docTipoCol" prefWidth="100.0" text="Tipo"/>
                                <TableColumn fx:id="docDataUploadCol" prefWidth="150.0" text="Data Upload"/>
                                <TableColumn fx:id="docAcoesCol" prefWidth="100.0" text="Ações"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                            <children>
                                <Button onAction="#handleUploadDocument" styleClass="primary-button"
                                        text="Fazer Upload"/>
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </content>
        </Tab>

    </TabPane>

    <HBox alignment="CENTER_RIGHT">
        <padding>
            <Insets top="10.0"/>
        </padding>
        <Button onAction="#handleCloseModal" styleClass="secondary-button" text="Fechar"/>
    </HBox>

</VBox>
